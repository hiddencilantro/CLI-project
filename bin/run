#!/usr/bin/env ruby

require_relative '../config/environment.rb'

BASE_URL = "https://www.tottenhamhotspur.com"

url = "https://www.tottenhamhotspur.com/teams/first-team/players/"
html = open(url)
html_parsed = Nokogiri::HTML(html)
players = html_parsed.css('.PlayersPlayer')

players.each do |player|
    number = player.css('.PlayersPlayer__number').text
    name = player.css('.PlayersPlayer__name').text
    hometown = player.css('.PlayersPlayer__country').text

    player_detail_url = player.attr("href")
    player_detail_html = open(BASE_URL + player_detail_url)
    player_detail_html_parsed = Nokogiri::HTML(player_detail_html)
    birthdate = player_detail_html_parsed.css('.no-spacing').text

    player_detail_multiple_text = player_detail_html_parsed.css('.rte')[0]
    player_detail_divided_text1 = player_detail_multiple_text.css('p')[0].text
    player_detail_divided_text2 = player_detail_multiple_text.css('p')[1].text
    # player_detail_divided_text3 = player_detail_multiple_text.css('p')[2].text

    Players.new(number, name, hometown, birthdate, player_detail_divided_text1, player_detail_divided_text2)

    puts ">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
    puts "Player Number: #{number}"
    puts "Player Name: #{name}"
    puts "Player Hometown: #{hometown}"
    puts ""
    puts "Player Info:"
    puts ""
    puts birthdate
    puts ""
    puts player_detail_divided_text1
    puts player_detail_divided_text2
    # puts player_detail_divided_text3
    puts ""
end

# binding.pry